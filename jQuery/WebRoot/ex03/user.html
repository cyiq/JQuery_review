<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<script language="JavaScript" src="../js/jquery-1.4.2.js"></script>
		<title>添加用户</title>
	</head>
	<body>
		<center>
			<br><br>
			添加用户:<br><br>
			姓名: <input type="text" name="name" id="name" />&nbsp;&nbsp;
			email: <input type="text" name="email" id="email" />&nbsp;&nbsp;
			电话: <input type="text" name="tel" id="tel" /><br><br>
			<button id="addUser">提交</button>
			<br><br>
			<hr>
			<br><br>
			<table id="usertable" border="1" cellpadding="5" cellspacing=0>
				<tbody>
					<tr>
						<th>姓名</th>
						<th>email</th>
						<th>电话</th>
						<th>&nbsp;</th>
					</tr>
					<tr>
						<td>Tom</td>
						<td>tom@tom.com</td>
						<td>5000</td>
						<td><a href="deleteEmp?id=Tom">Delete</a></td>
					</tr>
					<tr>
						<td>Jerry</td>
						<td>jerry@sohu.com</td>
						<td>8000</td>
						<td><a href="deleteEmp?id=Jerry">Delete</a></td>
					</tr>
				</tbody>
			</table>
		</center>
	</body>
	<script language="JavaScript">
		//<button id="addUser">提交</button>
		$("#addUser").click(function(){
			/*
			 * 姓名: <input type="text" name="name" id="name" />&nbsp;&nbsp;
				email: <input type="text" name="email" id="email" />&nbsp;&nbsp;
				电话: <input type="text" name="tel" id="tel" /><br><br>
			 */
			var $nameValue = $("#name").val();
			var $emailValue = $("#email").val();
			var $telValue = $("#tel").val();
			
			/*
			 * <tr>
						<td>Jerry</td>
						<td>jerry@sohu.com</td>
						<td>8000</td>
						<td><a href="deleteEmp?id=Jerry">Delete</a></td>
					</tr>
			 */
			
			var $tr = $("<tr></tr>");
			
			var $nameTd = $("<td></td>");
			$nameTd.text($nameValue);
			
			var $emailTd = $("<td></td>");
			$emailTd.text($emailValue);
			
			var $telTd = $("<td></td>");
			$telTd.text($telValue);
			
			var $aTd = $("<td></td>");
			var $a = $("<a></a>");
			$a.attr("href","deleteEmp?id="+$nameValue);
			$a.text("Delete");
			$aTd.append($a);
			
			$tr.append($nameTd);
			$tr.append($emailTd);
			$tr.append($telTd);
			$tr.append($aTd);
			
			var $tbody = $("tbody");
			$tbody.append($tr);
			
			$a.click(function(){
				/*
				 * <tr>
							<td>Jerry</td>
							<td>jerry@sohu.com</td>
							<td>8000</td>
							<td><a href="deleteEmp?id=Jerry">Delete</a></td>
						</tr>
				 */
				var $trElement = $a.parent().parent();
				
				var $name = $trElement.children().eq(0).text();
				
				var flag = confirm("你确认要删除"+$name+"这个用户吗？");
				
				if(!flag){
					//取消
					return false;
					
				}else{
					//确认
					$trElement.remove();
					
					return false;
				}
				
				/*
				 * 	* 获取指定元素的父元素：调用parent()方法
				 * 	* 获取指定元素的子元素：调用children()方法，返回的是所有子元素
				 * 	* eq()方法，获取第N个元素
				 */
				
			});
		});
	
	</script>
</html>
